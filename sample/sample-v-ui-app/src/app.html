<template>
  <require from='./nav-bar'></require>
  <require from='./checkbox.html'></require>
  <div class="container">
    <nav-bar router.bind='router'></nav-bar>
    <main as-element='router-view'></main>
  </div>
  <button
    class="btn btn-sm btn-info"
    show.bind="minimizedMonitor"
    click.trigger="minimizedMonitor = false"
    style="position: fixed; bottom: 20px; right: 20px;">
    Maximize monitor ${window.virtualRepeat ? `(${window.virtualRepeat.items.length})` : ''}</button>
  <div
    if.bind="window.virtualRepeat"
    show.bind="!minimizedMonitor"
    class="bg-white border shadow-lg d-flex flex-column"
    style="position: fixed; bottom: 0; right: 0; max-height: 80vh;">
    <let
      virtual-repeat.bind='window.virtualRepeat'
      view-count-same-max-views-require.bind="virtualRepeat.viewSlot.children.length === (virtualRepeat.elementsInView * 2)"></let>
    <button
      class="btn btn-sm btn-block btn-info flex-shrink-0"
      click.trigger="minimizedMonitor = true">Minimize monitor</button>
    <div class="flex-fill" style="overflow-y: auto;">
      <table class="table table-sm table-striped table-bordered">
        <caption class="px-2" style="caption-side: top;">Virtual repeat monitor</caption>
        <tr>
          <th>Name</th>
          <th>--- Value ---</th>
        </tr>
        <tr>
          <td>Size</td><td>${virtualRepeat.items.length}</td>
        </tr>
        <tr>
          <td>Item height</td>
          <td>${virtualRepeat.itemHeight}</td>
        </tr>
        <tr>
          <td>Total size</td>
          <td>${virtualRepeat.items.length * virtualRepeat.itemHeight}</td>
        </tr>
        <tr>
          <td>Active views count</td>
          <td class="table-${viewCountSameMaxViewsRequire ? 'success' : 'warning'}">${virtualRepeat.viewSlot.children.length}</td>
        </tr>
        <tr>
          <td>Max views</td>
          <td class="table-${viewCountSameMaxViewsRequire ? 'success' : 'warning'}">${virtualRepeat.elementsInView * 2}</td>
        </tr>
        <!-- <tr>
          <td>Last Rebind</td><td>${virtualRepeat._lastRebind}</td> -->
        <tr>
          <td>Elements In view</td>
          <td>${virtualRepeat.elementsInView}</td>
        </tr>
        <tr>
          <td>First</td><td>${virtualRepeat._first}</td>
        <!-- <tr>
          <td>Previous First</td><td>${virtualRepeat._previousFirst}</td> -->
        <tr>
          <td>Top Buffer height</td>
          <td>${virtualRepeat._topBufferHeight}</td>
        </tr>
        <tr>
          <td>Bottom Buffer height</td>
          <td>${virtualRepeat._bottomBufferHeight}</td>
        </tr>
        <tr>
          <td>Distance to top</td>
          <td>${virtualRepeat.distanceToTop}</td>
        </tr>
        <!-- <tr>
          <td>Scrolling Down</td>
          <td><checkbox checked.bind=virtualRepeat._scrollingDown></checkbox></td>
        </tr> -->
        <!-- <tr>
          <td>Scrolling Up</td>
          <td><checkbox checked.bind=virtualRepeat._scrollingUp></checkbox></td>
        </tr> -->
        <!-- <tr>
          <td>Is First or last</td>
          <td><checkbox checked.bind=virtualRepeat._isAtFirstOrLastIndex></checkbox></td> -->
        <!-- <tr>
          <td>Switched Direction</td>
          <td><checkbox checked.bind=virtualRepeat._switchedDirection></checkbox></td>
        </tr> -->
        <tr>
          <td>Is Attached</td>
          <td><checkbox checked.bind=virtualRepeat._isAttached></checkbox></td>
        </tr>
        <tr>
          <td>Ticking</td>
          <td><checkbox checked.bind=virtualRepeat._ticking></checkbox></td>
        <tr>
          <td>Fixed height Container</td>
          <td><checkbox checked.bind=virtualRepeat._fixedHeightContainer></checkbox></td>
        <!-- <tr>
          <td>Has Calculated Size</td>
          <td><checkbox checked.bind=virtualRepeat._hasCalculatedSizes></checkbox></td> -->
        <!-- <tr>
          <td>Is At top</td>
          <td><checkbox checked.bind=virtualRepeat._isAtTop></checkbox></td>
        </tr> -->
        <!-- <tr>
          <td>Is Last Index</td>
          <td><checkbox checked.bind=virtualRepeat.isLastIndex></checkbox></td>
        </tr> -->
        <tr>
          <td>Called Get More</td>
          <td><checkbox checked.bind=virtualRepeat._calledGetMore></checkbox></td>
        </tr>
        <tr>
          <td>Skip Next Scroll</td>
          <td><checkbox checked.bind=virtualRepeat._skipNextScrollHandle></checkbox></td>
        </tr>
        <tr>
          <td>Handling Mutation</td>
          <td><checkbox checked.bind=virtualRepeat._handlingMutations></checkbox></td>
        </tr>
        <!-- <tr>
          <td>Is Scrolling</td>
          <td><checkbox checked.bind=virtualRepeat._isScrolling></checkbox></td>
        </tr> -->
      </table>
    </div>
  </div>
</template>
  